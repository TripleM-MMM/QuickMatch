(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{104:function(e,t,n){},105:function(e,t,n){},106:function(e,t,n){},149:function(e,t,n){},150:function(e,t,n){},151:function(e,t,n){},152:function(e,t,n){},154:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n.n(a),s=n(26),i=n.n(s),r=n(18),o=n(19),l=n(25),j=n(24),h=(n(52),n(0));var d=function(e){var t=Object(h.jsxs)("ul",{children:[Object(h.jsx)("li",{onClick:function(){return e.display_form("login")},children:"Logowanie"}),Object(h.jsx)("li",{onClick:function(){return e.display_form("signup")},children:"Rejestracja"})]}),n=Object(h.jsx)("ul",{children:Object(h.jsx)("li",{onClick:e.handle_logout,children:"Wyloguj si\u0119"})});return Object(h.jsx)("div",{children:e.logged_in?n:t})},u=n(36),b=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={username:"",password:""},e.handle_change=function(t){var n=t.target.name,a=t.target.value;e.setState((function(e){var t=Object(u.a)({},e);return t[n]=a,t}))},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return Object(h.jsxs)("form",{onSubmit:function(t){return e.props.handle_login(t,e.state)},children:[Object(h.jsx)("h4",{children:"Zaloguj si\u0119"}),Object(h.jsx)("label",{htmlFor:"username",children:"Nazwa u\u017cytkownika"}),Object(h.jsx)("input",{type:"text",name:"username",value:this.state.username,onChange:this.handle_change}),Object(h.jsx)("label",{htmlFor:"password",children:"Has\u0142o"}),Object(h.jsx)("input",{type:"password",name:"password",value:this.state.password,onChange:this.handle_change}),Object(h.jsx)("input",{type:"submit"})]})}}]),n}(c.a.Component),O=b,m=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={username:"",password:"",email:"",first_name:""},e.handle_change=function(t){var n=t.target.name,a=t.target.value;e.setState((function(e){var t=Object(u.a)({},e);return t[n]=a,t}))},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return Object(h.jsxs)("form",{onSubmit:function(t){return e.props.handle_signup(t,e.state)},children:[Object(h.jsx)("h4",{children:"Zarejestruj si\u0119"}),Object(h.jsx)("label",{htmlFor:"username",children:"Nazwa u\u017cytkownika:"}),Object(h.jsx)("input",{type:"text",name:"username",value:this.state.username,onChange:this.handle_change}),Object(h.jsx)("label",{htmlFor:"password",children:"Has\u0142o:"}),Object(h.jsx)("input",{type:"password",name:"password",value:this.state.password,onChange:this.handle_change}),Object(h.jsx)("label",{htmlFor:"email",children:"Email:"}),Object(h.jsx)("input",{type:"text",name:"email",value:this.state.email,onChange:this.handle_change}),Object(h.jsx)("label",{htmlFor:"first_name",children:"Imi\u0119:"}),Object(h.jsx)("input",{type:"text",name:"first_name",value:this.state.first_name,onChange:this.handle_change}),Object(h.jsx)("input",{type:"submit"})]})}}]),n}(c.a.Component),p=m,x=(n(75),n(5)),g=n(7);var f=function(){var e=Object(a.useState)(""),t=Object(x.a)(e,2),n=t[0],c=t[1],s=!!localStorage.getItem("token");return s&&fetch("http://localhost:8000/core/current_user/",{headers:{Authorization:"JWT ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(e){c(e.username)})),Object(h.jsxs)("nav",{className:"navbar",children:[Object(h.jsx)(g.b,{to:"/",className:"logo-link",children:Object(h.jsx)("img",{src:"/static/logo.png",alt:"logo"})}),Object(h.jsxs)("div",{className:"links",children:[Object(h.jsx)(g.b,{to:"/matches",children:"Mecze"}),Object(h.jsx)(g.b,{to:"/profile",children:"Profil"}),Object(h.jsx)(g.b,{to:"/pitches",children:"Boiska"}),Object(h.jsx)(g.b,{to:"/contact",children:"Kontakt"})]}),Object(h.jsx)("div",{className:"status",children:s?"Witaj ".concat(n," !"):Object(h.jsx)(g.b,{to:"/login",children:"Zaloguj si\u0119!"})}),Object(h.jsx)("div",{className:"login",children:Object(h.jsx)(g.b,{to:"/login",children:"Zarejestruj si\u0119"})})]})};n(83);var v=function(){return Object(h.jsx)("div",{className:"background",children:Object(h.jsx)("img",{src:"/static/main_background.jpg",alt:"footbal_pitch"})})},_=(n(54),n(84),n(20)),y=n.n(_);var k=function(e,t){for(var n=[],a=0;a<e.length;a++){var c=e[a];y()().isBefore(c[t])&&n.push(c)}return n};var w=function(e){var t=e.matches;return t=k(t,"date"),console.log(t),Object(h.jsx)("div",{className:"matches-list",children:t.map((function(e){return Object(h.jsx)("div",{className:"match-preview",children:Object(h.jsxs)(g.b,{to:"/matches/".concat(e.id),children:[Object(h.jsxs)("h2",{children:[" ",e.place," "]}),Object(h.jsxs)("div",{class:"column",children:[Object(h.jsxs)("p",{children:["Cena: ",e.price]}),Object(h.jsxs)("p",{children:["Data: ",e.date.slice(0,10)]}),Object(h.jsxs)("p",{children:["Godzina : ",e.date.slice(11,16)]})]}),Object(h.jsxs)("div",{class:"column",children:[Object(h.jsxs)("p",{children:["Cena: ",e.price]}),Object(h.jsxs)("p",{children:["Opis meczu: ",e.description]})]}),Object(h.jsxs)("div",{class:"column",style:{backgroundColor:"grey"},children:[Object(h.jsx)("p",{children:"Liczba zapisanych: "}),Object(h.jsxs)("p",{children:[e.signed_players,"/",e.max_players," "]})]})]})},e.id)}))})},N=n(11),z=n.n(N),S=function(e){var t=Object(a.useState)(null),n=Object(x.a)(t,2),c=n[0],s=n[1];return Object(a.useEffect)((function(){z.a.get("http://localhost:8000"+e).then((function(e){console.log(e.data),s(e.data)}))}),[e]),{data:c}};var C=function(){var e=S("/api/matches/").data;return Object(h.jsxs)("div",{className:"all",children:[Object(h.jsx)("div",{className:"menu",children:Object(h.jsx)(g.b,{to:"/create_match",children:"Dodaj wydarzenie"})}),Object(h.jsxs)("div",{className:"matches",children:[Object(h.jsx)("h1",{children:"Mecze w twojej okolicy"}),Object(h.jsx)("div",{className:"list",children:e&&Object(h.jsx)(w,{matches:e})})]})]})};n(104);var I=function(e){var t=e.pitches;return Object(h.jsx)("div",{className:"pitches-list",children:t.map((function(e){return Object(h.jsxs)("div",{className:"pitch-preview",children:[Object(h.jsxs)("h2",{children:[" ",e.name," "]}),Object(h.jsx)("img",{src:e.photo_url,align:"left",alt:"pitch_photo"}),Object(h.jsxs)("div",{className:"info",children:[Object(h.jsxs)("p",{children:["Adres: ",e.address]}),Object(h.jsxs)("p",{children:["Kontakt: ",e.contact]})]})]},e.id)}))})};var J=function(){var e=S("/api/pitches/").data;return Object(h.jsxs)("div",{className:"matches",children:[Object(h.jsx)("h1",{children:"Boiska w twojej okolicy"}),Object(h.jsx)("div",{className:"list",children:e&&Object(h.jsx)(I,{pitches:e})})]})},D=(n(105),n(65)),A=n.n(D),T=(n(41),n(6)),M=(n(106),function(e){return Object(h.jsx)("div",{className:"popup-box",children:Object(h.jsxs)("div",{className:"box",children:[Object(h.jsx)("span",{className:"close-icon",onClick:e.handleClose,children:"x"}),e.content]})})}),F=n(51),W=n.n(F);var q=function(){var e=Object(a.useState)(3),t=Object(x.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)("0"),i=Object(x.a)(s,2),r=i[0],o=i[1],l=Object(a.useState)(null),j=Object(x.a)(l,2),d=j[0],u=j[1],b=Object(a.useState)(""),O=Object(x.a)(b,2),m=O[0],p=O[1],g=Object(a.useState)("0"),f=Object(x.a)(g,2),v=f[0],_=f[1],k=!!localStorage.getItem("token"),w=Object(T.f)(),N=S("/api/pitches/").data;return Object(h.jsxs)("div",{className:"create",children:[Object(h.jsx)("h2",{children:"Dodaj nowy mecz"}),Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={pitch:n,price:r,date:d,description:m,max_players:v};z.a.post("/api/create_match/",t,{headers:{Authorization:"JWT ".concat(localStorage.getItem("token"))}}).catch((function(e){e.response?console.log(e.response.status):console.log("Error",e.message)})).then((function(e){w.go(-1)}))},children:[Object(h.jsx)("label",{children:"Miejsce: "}),Object(h.jsx)("select",{required:!0,value:n,onChange:function(e){return c(e.target.value)},children:N&&N.map((function(e){return Object(h.jsx)("option",{value:e.id,children:e.name})}))}),Object(h.jsx)("label",{children:"Cena: "}),Object(h.jsx)(W.a,{className:"form-control",required:!0,strict:!0,mobile:!0,precision:2,step:.1,min:.1,onChange:function(e){return o(e)}}),Object(h.jsx)("label",{children:"Data: "}),Object(h.jsx)(A.a,{required:!0,selected:d,onChange:function(e){return u(e)},timeInputLabel:"Time:",dateFormat:"MM/dd/yyyy h:mm aa",showTimeInput:!0,minDate:y()().toDate()}),Object(h.jsx)("label",{children:"Opis: "}),Object(h.jsx)("textarea",{required:!0,value:m,onChange:function(e){return p(e.target.value)}}),Object(h.jsx)("label",{children:"Liczba os\xf3b: "}),Object(h.jsx)(W.a,{className:"form-control",required:!0,strict:!0,mobile:!0,min:2,precision:2,onChange:function(e){return _(e)}}),Object(h.jsx)("label",{}),Object(h.jsx)("button",{className:"add",children:"Dodaj wydarzenie"}),!k&&Object(h.jsx)(M,{content:Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("b",{children:"Musisz by\u0107 zalogowany !"})}),handleClose:function(){w.go(-1)}})]})]})},E=(n(149),function(){var e=Object(a.useState)(!1),t=Object(x.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(!1),i=Object(x.a)(s,2),r=i[0],o=i[1],l=!0,j=!1,d=Object(T.g)().id,u=S("/api/matches/"+d+"/").data,b=u&&u.organizer,O=u&&u.pitch,m=S("/api/pitches/"+O+"/").data,p=S("/api/users/"+b+"/").data,g=Object(T.f)(),f={match_id:d},v=!!localStorage.getItem("token"),_=Object(a.useState)(""),y=Object(x.a)(_,2),k=y[0],w=y[1];v&&fetch("http://localhost:8000/core/current_user/",{headers:{Authorization:"JWT ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(e){w(e.username)}));return Object(h.jsxs)("div",{className:"match_details",children:[Object(h.jsxs)("div",{className:"row1",children:[Object(h.jsxs)("div",{className:"column1",children:[Object(h.jsx)("h1",{children:"Lokalizacja"}),Object(h.jsxs)("h2",{children:[" ",m&&m.name," "]}),Object(h.jsxs)("p",{children:["Adres: ",m&&m.address]}),Object(h.jsxs)("p",{children:["Kontakt: ",m&&m.contact]}),Object(h.jsx)("img",{src:m&&m.photo_url,alt:"Pitch"})]}),Object(h.jsxs)("div",{className:"column1",children:[Object(h.jsx)("h1",{children:"Informacja o wydarzeniu"}),Object(h.jsx)("p",{children:u&&u.description}),Object(h.jsxs)("p",{children:["Data: ",u&&u.date.slice(0,10)]}),Object(h.jsxs)("p",{children:["Godzina : ",u&&u.date.slice(11,16)]}),Object(h.jsxs)("p",{children:["Liczba uczestnik\xf3w: ",u&&u.signed_players,"/",u&&u.max_players]}),Object(h.jsxs)("p",{children:["Organizator: ",p&&p.firs_name," ",p&&p.last_name," (",p&&p.username,")"]})]})]}),Object(h.jsxs)("div",{className:"buttons",children:[!(k===(p&&p.username))&&Object(h.jsx)("button",{onClick:function(){z.a.post("/api/sign_for_match/",f,{headers:{Authorization:"JWT ".concat(localStorage.getItem("token"))}}).catch((function(e){e.response?(console.log(n),403===e.response.status?j=!0:401===e.response.status&&(l=!1),console.log(n),console.log(e.response.status)):(console.log(e.status),console.log("Error",e.message)),console.log(e.config)})).then((function(e){l&&!j?g.push("/matches"):j?o(!0):c(!0)}))},children:"Do\u0142\u0105cz do wydarzenia"}),k===(p&&p.username)&&Object(h.jsx)("button",{onClick:function(){z.a.post("/api/delete_match/",f,{headers:{Authorization:"JWT ".concat(localStorage.getItem("token"))}}).catch((function(e){e.response?console.log(e.response.status):console.log("Error",e.message)})).then((function(e){g.push("/matches")}))},children:"Usu\u0144 wydarzenie"})]}),n&&Object(h.jsx)(M,{content:Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("b",{children:"Musisz by\u0107 zalogowany !"})}),handleClose:function(){c(!n)}}),r&&Object(h.jsx)(M,{content:Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("b",{children:"Ju\u017c do\u0142\u0105czy\u0142e\u015b do tego wydarzenia !"})}),handleClose:function(){o(!r)}})]})});n(150),n(151);var Z=function(){return Object(h.jsxs)("div",{className:"contact",children:[Object(h.jsx)("div",{className:"background",children:Object(h.jsx)("img",{src:"/static/main_background.jpg",alt:"footbal_pitch"})}),Object(h.jsxs)("div",{classname:"information",children:[Object(h.jsx)("p",{children:"Je\u015bli chcesz doda\u0107 boisko, napisz do nas:"}),Object(h.jsx)("p",{children:"mail: retajczyk@student.agh.edu.pl"})]})]})},L=(n(152),function(e){var t=Object(a.useState)(null),n=Object(x.a)(t,2),c=n[0],s=n[1];return Object(a.useEffect)((function(){z.a.get("/api/user_profile/",{headers:{Authorization:"JWT ".concat(localStorage.getItem("token"))}}).then((function(e){console.log(e.data),s(e.data)}))}),[e]),{data:c}}),P=function(){var e=L("/api/user_profile/").data,t=e&&e.user_matches,n=[],c=S("/api/matches/?format=json").data;if(null!=c&&null!=t)for(var s=0;s<c.length;s++)t.includes(c[s].id)&&(console.log(c[s].id),n.push(c[s]));console.log(n);var i=JSON.stringify(c);console.log(i[0]);var r=Object(a.useState)(!1),o=Object(x.a)(r,2),l=o[0],j=o[1],d=!!localStorage.getItem("token"),u=Object(T.f)(),b=Object(a.useState)(e&&e.email),O=Object(x.a)(b,2),m=O[0],p=O[1],g=Object(a.useState)(e&&e.first_name),f=Object(x.a)(g,2),v=f[0],_=f[1],k=Object(a.useState)(e&&e.last_name),w=Object(x.a)(k,2),N=w[0],C=w[1],I=Object(a.useState)(e&&e.password),J=Object(x.a)(I,2),D=J[0],A=J[1],F=Object(a.useState)(),W=Object(x.a)(F,2),q=W[0],E=W[1],Z=function(e){var t={match_id:e.target.getAttribute("data-arg1")};z.a.post("/api/sign_out_from_match/",t,{headers:{Authorization:"JWT ".concat(localStorage.getItem("token"))}}).catch((function(e){e.response?console.log(e.response.status):console.log("Error",e.message),console.log(e.config)})).then((function(e){console.log(t),window.location.reload(!1)}))};return Object(h.jsx)("div",{style:{backgroundColor:"black"},children:Object(h.jsxs)("div",{className:"profile",children:[Object(h.jsx)("div",{className:"img",children:Object(h.jsx)("img",{src:"/static/stadium.jpg",alt:"stadium"})}),Object(h.jsxs)("div",{className:"info",children:[Object(h.jsx)("h2",{className:"header",children:"Profil"}),Object(h.jsxs)("p",{children:["Nazwa u\u017cytkownika: ",e&&e.username]}),Object(h.jsxs)("p",{children:["Imi\u0119: ",e&&e.first_name]}),Object(h.jsxs)("p",{children:["Nazwisko: ",e&&e.last_name]}),Object(h.jsxs)("p",{children:["email: ",e&&e.email]}),Object(h.jsx)("h3",{children:"Mecze"}),n.map((function(e){return Object(h.jsx)("div",{className:"match-preview",children:y()().isBefore(e.date)?Object(h.jsxs)("button",{className:"match-date",onClick:Z,"data-arg1":e.id,children:[" Data: ",e.date.slice(0,10)," Godzina : ",e.date.slice(11,16)," - ZREZYGNUJ"]}):Object(h.jsxs)("button",{className:"match-date-past",children:[" Data: ",e.date.slice(0,10)," Godzina : ",e.date.slice(11,16)]})},e.id)}))]}),Object(h.jsx)("h2",{className:"edit",children:"Edytuj profil"}),Object(h.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),q===D){var t={first_name:v,last_name:N,email:m,password:D};console.log(t),z.a.post("/api/edit_user_profile/",t,{headers:{Authorization:"JWT ".concat(localStorage.getItem("token"))}}).then((function(e){console.log(t),window.location.reload(!1)}))}else j(!0)},children:[Object(h.jsx)("label",{children:"email: "}),Object(h.jsx)("input",{type:"text",required:!0,value:m,onChange:function(e){return p(e.target.value)}}),Object(h.jsx)("label",{children:"Imie: "}),Object(h.jsx)("input",{type:"text",required:!0,value:v,onChange:function(e){return _(e.target.value)}}),Object(h.jsx)("label",{children:"Nazwisko: "}),Object(h.jsx)("input",{type:"text",required:!0,value:N,onChange:function(e){return C(e.target.value)}}),Object(h.jsx)("label",{children:"Nowe lub stare has\u0142o: "}),Object(h.jsx)("input",{type:"password",required:!0,value:D,onChange:function(e){return A(e.target.value)}}),Object(h.jsx)("label",{children:"Potwierd\u017a has\u0142o: "}),Object(h.jsx)("input",{type:"password",required:!0,value:q,onChange:function(e){return E(e.target.value)}}),Object(h.jsx)("button",{className:"save",children:"Zapisz"}),!d&&Object(h.jsx)(M,{content:Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("b",{children:"Musisz by\u0107 zalogowany !"})}),handleClose:function(){u.go(-1)}}),l&&Object(h.jsx)(M,{content:Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("b",{children:"Has\u0142a musz\u0105 by\u0107 takie same !"})}),handleClose:function(){j(!l)}})]})]})})},B=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handle_login=function(e,t){e.preventDefault(),fetch("http://localhost:8000/token-auth/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){localStorage.setItem("token",e.token),a.setState({logged_in:!0,displayed_form:"",username:e.user.username})}))},a.handle_signup=function(e,t){e.preventDefault(),fetch("http://localhost:8000/core/users/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){localStorage.setItem("token",e.token),a.setState({logged_in:!0,displayed_form:"",username:e.username})}))},a.handle_logout=function(){localStorage.removeItem("token"),a.setState({logged_in:!1,username:""})},a.display_form=function(e){a.setState({displayed_form:e})},a.state={displayed_form:"",logged_in:!!localStorage.getItem("token"),username:""},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.state.logged_in&&fetch("http://localhost:8000/core/current_user/",{headers:{Authorization:"JWT ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(t){e.setState({username:t.username})}))}},{key:"render",value:function(){var e;switch(this.state.displayed_form){case"login":e=Object(h.jsx)(O,{handle_login:this.handle_login});break;case"signup":e=Object(h.jsx)(p,{handle_signup:this.handle_signup});break;case"Matches":e=Object(h.jsx)(C,{handle_signup:this.handle_signup});break;case"pitches":e=Object(h.jsx)(J,{handle_signup:this.handle_signup});break;case"create_match":e=Object(h.jsx)(q,{handle_signup:this.handle_signup});break;case"contact":e=Object(h.jsx)(Z,{handle_signup:this.handle_signup});break;case"profile":e=Object(h.jsx)(P,{handle_signup:this.handle_signup});break;default:e=null}return Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)(g.a,{children:[Object(h.jsx)(f,{}),Object(h.jsxs)(T.c,{children:[Object(h.jsx)(T.a,{exact:!0,path:"/",children:Object(h.jsx)(v,{})}),Object(h.jsx)(T.a,{exact:!0,path:"/matches",children:Object(h.jsx)(C,{})}),Object(h.jsx)(T.a,{exact:!0,path:"/matches/:id",children:Object(h.jsx)(E,{})}),Object(h.jsx)(T.a,{exact:!0,path:"/pitches",children:Object(h.jsx)(J,{})}),Object(h.jsx)(T.a,{exact:!0,path:"/create_match",children:Object(h.jsx)(q,{})}),Object(h.jsx)(T.a,{exact:!0,path:"/login",children:Object(h.jsxs)("div",{className:"login",children:[Object(h.jsx)("div",{className:"img",children:Object(h.jsx)("img",{src:"/static/background_.jpg",alt:"background"})}),Object(h.jsx)("h2",{children:"QuickMatch"}),Object(h.jsx)("h3",{children:Object(h.jsx)(d,{logged_in:this.state.logged_in,display_form:this.display_form,handle_logout:this.handle_logout})}),e,Object(h.jsx)("h2",{children:this.state.logged_in?"Zalogowano!":"Musisz si\u0119 zalogowa\u0107 !"})]})}),Object(h.jsx)(T.a,{exact:!0,path:"/contact",children:Object(h.jsx)(Z,{})}),Object(h.jsx)(T.a,{exact:!0,path:"/profile",children:Object(h.jsx)(P,{})})]})]})})}}]),n}(a.Component);i.a.render(Object(h.jsx)(B,{}),document.getElementById("root"))},52:function(e,t,n){},54:function(e,t,n){},75:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){}},[[154,1,2]]]);
//# sourceMappingURL=main.b5e649e1.chunk.js.map